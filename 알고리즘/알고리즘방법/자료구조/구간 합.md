# 구간 합 (Prefix Sum)

## 1. 개요
**합 배열(Prefix Sum Array)** 을 미리 구해놓음으로써, 특정 구간의 데이터 합을 **O(1)** 의 시간 복잡도로 빠르게 구하는 알고리즘입니다.

## 2. 핵심 이론

### 2.1 합 배열 (S) 정의
배열 A가 있을 때, 합 배열 S는 0번 인덱스부터 i번 인덱스까지의 합을 저장합니다.
$$S[i] = A[0] + A[1] + ... + A[i]$$
- **점화식**: `S[i] = S[i-1] + A[i]`

### 2.2 구간 합 구하기
인덱스 $i$부터 $j$까지의 구간 합은 합 배열을 이용해 다음과 같이 구합니다.
$$Sum(i, j) = S[j] - S[i-1]$$
(단, $i=0$일 경우 $S[j]$)

## 3. 시간 복잡도
- 합 배열 생성: **O(n)**
- 구간 합 계산: **O(1)**

## 4. 파이썬(Python) 구현 코드

```python
def prefix_sum(arr, i, j):
    n = len(arr)
    # 1. 합 배열(Sum Array) 생성
    # 편의상 S[0] = 0으로 두고 인덱스를 1부터 맞추기도 하지만,
    # 여기서는 0-based 인덱스 기준으로 설명합니다.
    S = [0] * n
    S[0] = arr[0]
    
    for k in range(1, n):
        S[k] = S[k-1] + arr[k]
        
    # 2. 구간 합 계산 (i ~ j)
    if i == 0:
        return S[j]
    else:
        return S[j] - S[i-1]

# 사용 예시
data = [10, 20, 30, 40, 50]
# S = [10, 30, 60, 100, 150]
print(f"원본: {data}")

# 구간 [1, 3] (20, 30, 40)의 합: 90
result = prefix_sum(data, 1, 3) 
print(f"인덱스 1~3의 합: {result}")
```

![[Pasted image 20240107184636.png]]
![[Pasted image 20240107190007.png]]