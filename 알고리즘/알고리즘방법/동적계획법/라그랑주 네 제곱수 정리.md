# 라그랑주 네 제곱수 정리 (Lagrange's Four-Square Theorem)

## 1. 개요
**라그랑주 네 제곱수 정리**는 **모든 자연수는 넷 혹은 그 이하의 제곱수의 합으로 표현할 수 있다**는 정리입니다.
$$ n = a^2 + b^2 + c^2 + d^2 $$
(단, $a, b, c, d$는 0 이상의 정수)

## 2. 왜 배워야 할까? (Why Learn?)
- **코딩 테스트**: "어떤 수 N을 최소 개수의 제곱수 합으로 표현하라"는 문제(예: 백준 17626 Four Squares)에서 **최대 답이 4**라는 강력한 힌트(Bound)를 줍니다. 이를 통해 탐색 범위를 획기적으로 줄일 수 있습니다. (답은 1, 2, 3, 4 중 하나임이 보장됨)
- **알고리즘 최적화**: 복잡한 연산 없이 수학적 성질만으로 문제의 해답 범위를 좁히는 훈련이 됩니다.

## 3. 실생활 및 활용 분야 (Applications)
1.  **암호학 (Cryptography)**:
    -   암호 프로토콜(Zero-Knowledge Proofs 등)에서 특정 값이 **음수가 아님(Non-negative)** 을 증명할 때 사용됩니다. 어떤 수가 4개의 제곱수 합으로 표현된다면 그 수는 반드시 양수이기 때문입니다.
    -   암호화된 데이터 내의 범위 증명(Range Proof)에서 효율적인 검증 수단으로 활용됩니다.
2.  **신호 처리 (Signal Processing)**:
    -   복잡한 신호를 더 단순한 구성 요소(에너지)로 분해할 때, 제곱수 합의 성질이 사용되기도 합니다.
3.  **컴퓨터 그래픽스**:
    -   거리 계산($x^2 + y^2 + z^2$) 등에서 정수 좌표 최적화 및 분해에 응용될 수 있습니다.

## 4. DP를 이용한 풀이
어떤 수 $i$를 제곱수의 합으로 표현할 때, 마지막에 더해진 제곱수를 $j^2$라고 하면,
나머지 값 $i - j^2$ 또한 최소 개수의 제곱수 합으로 표현되어야 합니다.

**점화식:**
$$ DP[i] = \min(DP[i - j^2]) + 1 $$
(단, $j^2 \le i$)

## 5. 파이썬 구현

```python
import math

def solve_four_squares(n):
    # DP 테이블 초기화 (최악의 경우인 1^2의 합으로 채움)
    dp = [0] * (n + 1)
    
    for i in range(1, n + 1):
        dp[i] = i # 초기값: 1^2 + 1^2 ... (개수 i개)
        
        # 1부터 제곱근까지 반복하며 최소 횟수 갱신
        for j in range(1, int(math.sqrt(i)) + 1):
            dp[i] = min(dp[i], dp[i - j*j] + 1)
            
    return dp[n]

# 더 최적화된 방법 (브루트포스 + 이론 기반)
def solve_optimized(n):
    # 1. 답이 1인 경우 (n이 제곱수)
    if int(n**0.5)**2 == n:
        return 1
        
    # 2. 답이 2인 경우 (n = a^2 + b^2)
    # 브루트포스로 확인 (하나를 빼서 제곱수인지)
    for i in range(1, int(n**0.5) + 1):
        if int((n - i**2)**0.5)**2 == (n - i**2):
            return 2
            
    # 3. 답이 3인 경우 (르장드르 정리에 의해 제외 가능하지만 여기선 생략)
    # 4. 르장드르 세 제곱수 정리에 의해 3이 아닌 경우 4 (n = 4^a(8b + 7) 꼴일때 4)
    # 일반적인 DP로는 위 함수 사용.
    pass

n = 25 # 5^2 (답: 1)
print(f"25의 최소 제곱수 개수: {solve_four_squares(25)}")
n = 26 # 5^2 + 1^2 (답: 2)
print(f"26의 최소 제곱수 개수: {solve_four_squares(26)}")
```

> [!TIP] 관련 알고리즘
> - [동적 계획법](../동적%20계획법.md)
> - [르장드르의 세 제곱수 정리](르장드르의%20세%20제곱수%20정리.md)
