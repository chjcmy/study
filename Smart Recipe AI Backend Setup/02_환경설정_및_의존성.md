# í™˜ê²½ì„¤ì • ë° ì˜ì¡´ì„± ê´€ë¦¬

## ğŸ“¦ NestJS í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

### í”„ë¡œì íŠ¸ ìƒì„±
```bash
cd /Users/choeseonghyeon/smart-recipe-chatbot
nest new backend
cd backend
```

### í•µì‹¬ ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# NestJS í•µì‹¬
npm install @nestjs/common @nestjs/core @nestjs/platform-express

# ë°ì´í„°ë² ì´ìŠ¤
npm install @nestjs/mongoose mongoose
npm install @elastic/elasticsearch
npm install redis

# ì„¤ì • ê´€ë¦¬
npm install @nestjs/config

# ì¸ì¦ ë° ë³´ì•ˆ
npm install @nestjs/jwt @nestjs/passport passport passport-jwt passport-local
npm install bcrypt helmet compression
npm install @nestjs/throttler

# ê²€ì¦ ë° ë³€í™˜
npm install class-validator class-transformer

# ë°ì´í„° ì²˜ë¦¬
npm install papaparse axios openai

# ê¸°íƒ€ ìœ í‹¸ë¦¬í‹°
npm install uuid reflect-metadata rxjs

# íƒ€ì… ì •ì˜
npm install -D @types/bcrypt @types/papaparse @types/passport-jwt 
npm install -D @types/passport-local @types/uuid
```

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### .env íŒŒì¼ êµ¬ì„±
```env
# ì„œë²„ ì„¤ì •
NODE_ENV=development
PORT=3001

# MongoDB ì„¤ì •
MONGODB_URI=mongodb://recipe_admin:RecipeDB_2024_Secure%239x7%21@192.168.0.111:27017/recipe_ai_db?authSource=admin

# Elasticsearch ì„¤ì •
ELASTICSEARCH_NODE=http://192.168.0.111:9200

# Redis ì„¤ì •
REDIS_HOST=192.168.0.111
REDIS_PORT=6379
REDIS_PASSWORD=RecipeAI2024!

# JWT ì„¤ì •
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=24h

# OpenAI ì„¤ì •
OPENAI_API_KEY=your-openai-api-key

# Ollama ì„¤ì •
OLLAMA_BASE_URL=http://192.168.0.111:11434

# CORS ì„¤ì •
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true
```

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.module.ts              # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ main.ts                    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”œâ”€â”€ config/                    # ì„¤ì • íŒŒì¼ë“¤
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”œâ”€â”€ elasticsearch.config.ts
â”‚   â”‚   â”œâ”€â”€ redis.config.ts
â”‚   â”‚   â””â”€â”€ auth.config.ts
â”‚   â”œâ”€â”€ database/                  # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ elasticsearch.module.ts
â”‚   â”‚   â””â”€â”€ redis.module.ts
â”‚   â”œâ”€â”€ schemas/                   # MongoDB ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ recipe.schema.ts
â”‚   â”‚   â”œâ”€â”€ ingredient.schema.ts
â”‚   â”‚   â”œâ”€â”€ user.schema.ts
â”‚   â”‚   â””â”€â”€ vector-metadata.schema.ts
â”‚   â””â”€â”€ modules/                   # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚       â”œâ”€â”€ auth/                  # ì¸ì¦/ê¶Œí•œ
â”‚       â”œâ”€â”€ user/                  # ì‚¬ìš©ì ê´€ë¦¬
â”‚       â”œâ”€â”€ recipe/                # ë ˆì‹œí”¼ ê´€ë¦¬
â”‚       â”œâ”€â”€ search/                # ê²€ìƒ‰ ê¸°ëŠ¥
â”‚       â”œâ”€â”€ vector/                # ë²¡í„° ê²€ìƒ‰
â”‚       â”œâ”€â”€ ai/                    # AI ê¸°ëŠ¥
â”‚       â”œâ”€â”€ chat/                  # ì±—ë´‡
â”‚       â”œâ”€â”€ indexing/              # ë°ì´í„° ì¸ë±ì‹±
â”‚       â””â”€â”€ data/                  # ë°ì´í„° ë¡œë”©
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ nest-cli.json
```

## ğŸš€ ê°œë°œ ì„œë²„ ì‹¤í–‰

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘
```bash
# ê°œë°œ ëª¨ë“œ
npm run start:dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
npm run start:prod
```

### ì„œë²„ ì ‘ì† ì •ë³´
- **API ì„œë²„**: http://localhost:3001
- **API ë¬¸ì„œ**: http://localhost:3001/api/docs
- **í—¬ìŠ¤ì²´í¬**: http://localhost:3001/api/v1/health

## âš ï¸ ì£¼ìš” ì´ìŠˆ ë° í•´ê²°

### ì˜ì¡´ì„± ì •ë¦¬
- **ì œê±°ëœ íŒ¨í‚¤ì§€**: `dotenv` (NestJS ConfigModuleë¡œ ëŒ€ì²´)
- **ë³´ì•ˆ ì·¨ì•½ì **: npm auditë¡œ í™•ì¸ í›„ ìˆ˜ì •

### í™˜ê²½ë³„ ì„¤ì •
- **ê°œë°œí™˜ê²½**: watch ëª¨ë“œ í™œì„±í™”
- **í”„ë¡œë•ì…˜**: ì••ì¶• ë° ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´ ì ìš©

---
*MongoDB URIì—ì„œ íŠ¹ìˆ˜ë¬¸ìëŠ” URL ì¸ì½”ë”© í•„ìš” (`#` â†’ `%23`, `!` â†’ `%21`)*