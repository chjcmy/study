# 지역 함수 (Local Functions)
#Kotlin/Function

> [!INFO] 지역 함수란?
> **지역 함수(Local Function)**는 말 그대로 **다른 함수 내부에 정의된 함수**입니다.
>
> 지역 함수는 자신이 선언된 바깥쪽 함수의 코드 블록 안에서만 호출할 수 있으며, 외부에서는 보이지 않습니다. 이는 특정 함수 내에서만 사용되는 보조 로직을 캡슐화하여 코드의 가독성과 구조를 개선하는 데 도움을 줍니다.

## 1. 지역 함수의 특징

-   **캡슐화**: 함수에 필요한 보조 로직을 외부에 노출하지 않고, 함수 내부에 숨길 수 있습니다.
-   **코드 중복 감소**: 바깥쪽 함수 내에서 반복되는 코드가 있다면, 이를 지역 함수로 추출하여 재사용할 수 있습니다.
-   **클로저(Closure)**: 지역 함수는 자신이 선언된 바깥쪽 함수의 파라미터와 변수(지역 변수 포함)에 접근할 수 있습니다.

## 2. 기본 사용법

### 유효성 검사 로직 캡슐화

함수의 파라미터에 대한 유효성 검사 로직을 지역 함수로 분리하면, 메인 로직이 더 깔끔해집니다.

```kotlin
fun registerUser(name: String, age: Int) {
    // 'registerUser' 함수 내에서만 사용 가능한 지역 함수
    fun validate(value: String, fieldName: String) {
        if (value.isBlank()) {
            throw IllegalArgumentException("$fieldName cannot be blank.")
        }
    }

    validate(name, "Name")
    // ... 다른 검증 로직 ...

    println("User $name registered.")
}

fun main() {
    registerUser("Alice", 25)
    // validate("test", "test") // 컴파일 오류! 외부에서 지역 함수를 호출할 수 없음
}
```

### 클로저로서의 동작

지역 함수는 바깥쪽 함수의 상태를 '포획(capture)'하여 사용할 수 있습니다.

```kotlin
fun calculate(numbers: List<Int>, operator: Char): List<Int> {
    // 바깥쪽 함수의 'operator' 파라미터를 포획하여 사용
    fun applyOperation(value: Int): Int {
        return when (operator) {
            '+' -> value + 1
            '-' -> value - 1
            else -> value
        }
    }

    return numbers.map { applyOperation(it) }
}

fun main() {
    val result = calculate(listOf(1, 2, 3), '+')
    println(result) // 출력: [2, 3, 4]
}
```

## 3. 람다 vs 지역 함수

람다와 지역 함수는 비슷한 역할을 할 수 있지만, 몇 가지 차이점이 있습니다.

| 구분 | 람다 (Lambda) | 지역 함수 (Local Function) |
| :--- | :--- | :--- |
| **이름** | 익명 (이름 없음) | 이름 있음 |
| **재귀 호출** | 직접 재귀 호출 불가 | 직접 재귀 호출 가능 |
| **가독성** | 한 줄의 간단한 로직에 적합 | 여러 줄의 복잡한 로직이나 이름이 필요할 때 더 명확함 |

> [!TIP]
> 로직이 복잡하거나, 자기 자신을 다시 호출하는 **재귀(Recursion)**가 필요하다면 람다보다는 이름이 있는 **지역 함수**를 사용하는 것이 더 나은 선택입니다.

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[11. 시퀀스.md|⬅️ 이전: 시퀀스]] | [[13. 리스트 접기.md|➡️ 다음: 리스트 접기]]