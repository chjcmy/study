# 제네릭 (Generics)
#Kotlin/Generics

> [!INFO] 제네릭(Generics)이란?
> **제네릭(Generics)**은 클래스나 함수를 정의할 때, 다루는 데이터의 **타입(Type)을 파라미터로** 받아 사용하도록 만드는 기능입니다. 이를 통해 특정 타입에 종속되지 않고, 다양한 타입을 처리할 수 있는 재사용 가능한 코드를 작성할 수 있습니다.

제네릭을 사용하면 다음과 같은 핵심적인 장점을 얻을 수 있습니다.
-   **타입 안전성**: 컴파일 시점에 타입 검사를 수행하여, `Any`를 사용할 때 발생할 수 있는 런타임 타입 오류를 방지합니다.
-   **코드 재사용성**: 여러 다른 타입에 대해 동일한 로직을 반복해서 작성할 필요가 없어집니다.

## 1. 제네릭 클래스

클래스를 정의할 때, 클래스 이름 뒤에 꺾쇠괄호(`< >`)를 사용하여 타입 파라미터를 선언합니다. 일반적으로 `T`(Type)라는 이름을 많이 사용합니다.

```kotlin
// 어떤 타입 T의 값을 담을 수 있는 Box 클래스
class Box<T>(val value: T)

fun main() {
    // T가 Int로 추론됨
    val intBox = Box(123)
    println(intBox.value) // 출력: 123

    // T가 String으로 추론됨
    val stringBox = Box("Hello")
    println(stringBox.value) // 출력: Hello
}
```
코틀린의 `List<T>`, `Set<T>`, `Map<K, V>` 등 모든 컬렉션이 제네릭 클래스의 대표적인 예시입니다.

## 2. 제네릭 함수

함수를 정의할 때도, 함수 이름 앞에 타입 파라미터를 선언하여 제네릭 함수를 만들 수 있습니다.

```kotlin
fun <T> printItem(item: T) {
    println("Item is: $item")
}

fun main() {
    printItem(42)       // T가 Int로 추론됨
    printItem("Kotlin") // T가 String으로 추론됨
}
```

## 3. 제네릭 제약 (Generic Constraints)

타입 파라미터 `T`에 올 수 있는 타입을 특정 클래스의 하위 타입으로 제한할 수 있습니다. 이를 통해 해당 타입이 가진 특정 함수나 프로퍼티에 안전하게 접근할 수 있습니다.

```kotlin
// T는 반드시 Number 클래스를 상속받아야 함
fun <T : Number> add(a: T, b: T): Double {
    // T가 Number 타입임이 보장되므로, toDouble() 함수를 안전하게 호출 가능
    return a.toDouble() + b.toDouble()
}

fun main() {
    println(add(10, 20))       // OK (Int는 Number의 하위 타입)
    println(add(3.14, 2.71))   // OK (Double은 Number의 하위 타입)
    // println(add("a", "b"))  // 컴파일 오류! String은 Number의 하위 타입이 아님
}
```

## 4. 공변성, 반공변성, 무공변성 (Variance)

> [!NOTE] Variance란?
> 제네릭 타입 간의 상속 관계를 어떻게 다룰 것인지를 정의하는 개념입니다. `List<String>`은 `List<Any>`의 하위 타입일까요?

-   **무공변성 (Invariant)**: 기본 상태. `MutableList<String>`와 `MutableList<Any>`는 서로 아무 관계가 없습니다.
-   **공변성 (Covariance, `out`)**: `List<String>`을 `List<Any>`로 취급하는 것을 허용합니다. (생산자 역할, 읽기 전용)
    ```kotlin
    // 코틀린의 List<T>는 List<out T>로 선언되어 있음
    val strings: List<String> = listOf("a", "b")
    val anys: List<Any> = strings // OK. 공변성이므로 하위타입으로 인정됨
    ```
-   **반공변성 (Contravariance, `in`)**: `MutableList<Any>`를 `MutableList<String>`으로 취급하는 것을 허용합니다. (소비자 역할, 쓰기 전용)

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[12. 확장 함수와 널이 될 수 있는 타입.md|⬅️ 이전: 확장 함수와 널이 될 수 있는 타입]] | [[15. 확장 프로퍼티.md|➡️ 다음: 확장 프로퍼티]]