# when 표현식
#Kotlin/ControlFlow

> [!INFO] `when` 표현식이란?
> 코틀린의 `when`은 다른 언어의 `switch` 문을 대체하는, 훨씬 더 강력하고 유연한 조건 분기 구조입니다. `if`와 마찬가지로 **표현식(Expression)**으로 사용될 수 있어, 결과 값을 반환할 수 있습니다.

## 1. `when`의 기본 사용법

`when`은 괄호 `()` 안의 값과 일치하는 분기(`->`)를 찾아 해당 코드를 실행합니다.

```kotlin
val number = 2

when (number) {
    1 -> println("One")
    2 -> println("Two") // 이 코드가 실행됨
    3 -> println("Three")
    else -> println("Unknown number") // 모든 조건에 맞지 않을 때 실행
}
```

## 2. `when`의 다양한 조건

`when`은 단순한 값 비교 외에 훨씬 더 다양한 조건을 사용할 수 있습니다.

### 여러 값 동시 처리
쉼표(`,`)를 사용하여 여러 조건을 하나의 분기에서 처리할 수 있습니다.
```kotlin
when (number) {
    1, 3, 5 -> println("Odd number")
    2, 4, 6 -> println("Even number")
}
```

### 범위(`in`) 사용
`in` 키워드를 사용하여 값이 특정 범위에 속하는지 검사할 수 있습니다.
```kotlin
val score = 85
when (score) {
    in 90..100 -> println("Excellent")
    in 70..89 -> println("Good")
    else -> println("Needs improvement")
}
```

### 타입(`is`) 검사
`is` 키워드를 사용하여 변수의 타입을 검사할 수 있습니다. 타입이 확인되면 자동으로 **스마트 캐스트(Smart Cast)**가 이루어집니다.
```kotlin
fun checkType(obj: Any) {
    when (obj) {
        is String -> {
            // obj가 String으로 스마트 캐스트되어 length 프로퍼티 사용 가능
            println("String with length ${obj.length}")
        }
        is Int -> println("Integer")
        else -> println("Unknown type")
    }
}
```

### 인자 없는 `when`
`when`의 괄호를 비워두면, 각 분기에서 `Boolean` 타입의 표현식을 직접 조건으로 사용할 수 있습니다. `if-else if` 체인을 대체하는 더 가독성 좋은 방법입니다.
```kotlin
val number = -10
when {
    number > 0 -> println("Positive")
    number < 0 -> println("Negative")
    else -> println("Zero")
}
```

## 3. `when`을 표현식으로 사용하기

`when`은 값을 반환할 수 있으므로, 그 결과를 변수에 할당하거나 함수의 반환값으로 직접 사용할 수 있습니다.

> [!IMPORTANT]
> `when`을 표현식으로 사용할 경우, 컴파일러는 모든 가능한 경우를 처리했는지 검사합니다. 따라서 **`else` 분기를 반드시 포함**하여 모든 경우를 처리하도록 강제합니다. (단, `enum`이나 `sealed class`처럼 가능한 모든 경우가 명시된 경우는 예외)

```kotlin
fun getGrade(score: Int): String {
    return when (score) {
        in 90..100 -> "A"
        in 80..89 -> "B"
        in 70..79 -> "C"
        else -> "F" // else가 없으면 컴파일 오류
    }
}

val grade = getGrade(95)
println("Your grade is $grade") // 출력: Your grade is A
```

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[3. 오버로딩.md|⬅️ 이전: 오버로딩]] | [[5. 이넘.md|➡️ 다음: 이넘]]