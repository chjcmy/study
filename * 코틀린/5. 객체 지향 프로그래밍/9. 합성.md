---
tags: [Kotlin, 객체지향, 합성]
aliases: [Kotlin Composition, 합성]
---

# 9. 합성

## 개요
이 문서는 코틀린에서 객체 지향 디자인 원칙 중 하나인 합성(Composition)에 대해 설명합니다. 합성은 클래스 간의 "has-a" 관계를 표현하며, 상속의 대안으로 코드 재사용성과 유연성을 높이는 데 중요한 역할을 합니다.

## 합성이란?
합성(Composition)은 클래스가 다른 클래스의 인스턴스를 자신의 멤버 변수로 포함하여 기능을 재사용하는 객체 지향 디자인 기법입니다. 이는 "A는 B를 가지고 있다 (A has a B)"라는 관계를 나타내며, 한 객체가 다른 객체의 기능을 사용하여 자신의 책임을 수행하는 방식입니다.

## 상속 대신 합성을 사용하는 이유
객체 지향 프로그래밍에서 상속은 강력한 코드 재사용 메커니즘이지만, 다음과 같은 단점 때문에 합성이 대안으로 자주 사용됩니다.

*   **강한 결합**: 상속은 부모 클래스와 자식 클래스 간에 강한 결합을 만듭니다. 부모 클래스의 변경이 자식 클래스에 예기치 않은 영향을 줄 수 있습니다.
*   **유연성 부족**: 상속 관계는 컴파일 시점에 고정되므로, 런타임에 객체의 동작을 변경하기 어렵습니다.
*   **단일 상속 제한**: 코틀린은 단일 상속만 허용하므로, 여러 부모의 기능을 동시에 물려받을 수 없습니다.
*   **취약한 기반 클래스 문제**: 부모 클래스의 내부 구현이 변경되면 자식 클래스도 영향을 받을 수 있습니다.

합성은 이러한 상속의 단점을 보완하여, 느슨한 결합과 높은 유연성을 제공합니다.

## 사용 방법 및 예제

### 기본 예제
```kotlin
// 엔진 인터페이스
interface Engine {
    fun start()
    fun stop()
}

// 가솔린 엔진 구현
class GasolineEngine : Engine {
    override fun start() {
        println("가솔린 엔진 시동!")
    }

    override fun stop() {
        println("가솔린 엔진 정지!")
    }
}

// 전기 엔진 구현
class ElectricEngine : Engine {
    override fun start() {
        println("전기 엔진 시동!")
    }

    override fun stop() {
        println("전기 엔진 정지!")
    }
}

// 자동차 클래스 (엔진을 합성)
class Car(private val engine: Engine) { // Engine 인터페이스를 통해 의존성 주입
    fun drive() {
        engine.start()
        println("자동차가 주행합니다.")
    }

    fun park() {
        println("자동차가 주차합니다.")
        engine.stop()
    }
}

fun main() {
    val gasolineCar = Car(GasolineEngine())
    gasolineCar.drive()
    gasolineCar.park()

    println("---")

    val electricCar = Car(ElectricEngine())
    electricCar.drive()
    electricCar.park()
}
```
위 예제에서 `Car` 클래스는 `Engine` 인터페이스를 구현하는 객체를 합성(포함)합니다. 이를 통해 `Car`는 `Engine`의 구체적인 구현에 의존하지 않고, 런타임에 어떤 `Engine` 객체를 주입받느냐에 따라 다른 엔진 기능을 사용할 수 있습니다. 이는 상속보다 훨씬 유연한 구조를 제공합니다.

## 주요 내용
- 코틀린 합성(Composition)의 개념 및 "has-a" 관계
- 상속 대신 합성을 사용하는 주요 이유
- 합성의 장점 (느슨한 결합, 유연성)
- 코드 예제를 통한 합성 이해

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[5-1. 상속과 확장.md|⬅️ 이전: 상속과 확장]] | [[5-9. 클래스 위임.md|➡️ 다음: 클래스 위임]]
