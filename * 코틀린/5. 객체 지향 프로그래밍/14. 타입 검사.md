---
tags: [Kotlin, 객체지향, 타입검사, 스마트캐스트]
aliases: [Kotlin Type Check, Kotlin Smart Cast, 타입 검사, 스마트 캐스트]
---

# 타입 검사와 스마트 캐스트

> [!INFO] 타입 검사란?
> **타입 검사(Type Check)**는 프로그램 실행 시점에 특정 객체가 내가 원하는 타입이 맞는지 확인하는 과정입니다. 코틀린에서는 `is` 연산자를 사용하여 타입 검사를 수행합니다.

## 1. `is` 연산자를 이용한 타입 검사

`is` 연산자는 객체가 특정 타입의 인스턴스이면 `true`를, 아니면 `false`를 반환합니다. `!is`는 그 반대의 경우에 `true`를 반환합니다.

```kotlin
open class Animal
class Dog : Animal()

fun main() {
    val animal: Animal = Dog()

    if (animal is Dog) {
        println("It's a Dog!")
    }

    if (animal !is String) {
        println("It's not a String!")
    }
}
```

## 2. 스마트 캐스트 (Smart Casts)

> [!IMPORTANT]
> 코틀린의 **스마트 캐스트**는 `is` 연산자로 타입 검사를 수행한 코드 블록 안에서, 컴파일러가 해당 변수를 **자동으로 검사된 타입으로 취급**해주는 매우 편리하고 안전한 기능입니다.

스마트 캐스트 덕분에, 개발자는 불필요한 명시적 타입 캐스팅 코드를 작성할 필요가 없습니다.

### 스마트 캐스트 예시

```kotlin
open class Shape
class Circle(val radius: Double) : Shape()
class Rectangle(val width: Double, val height: Double) : Shape()

fun printArea(shape: Shape) {
    if (shape is Circle) {
        // 'is'로 Circle임을 확인했기 때문에,
        // 이 블록 안에서 shape는 자동으로 Circle 타입으로 취급됨
        // 따라서 shape.radius 프로퍼티에 바로 접근 가능
        println("Circle area: ${Math.PI * shape.radius * shape.radius}")
    } else if (shape is Rectangle) {
        // 이 블록 안에서는 Rectangle 타입으로 스마트 캐스트됨
        println("Rectangle area: ${shape.width * shape.height}")
    }
}
```
> 만약 스마트 캐스트가 없다면, `(shape as Circle).radius` 와 같이 매번 명시적으로 타입을 변환해야 했을 것입니다.

### 스마트 캐스트의 조건

스마트 캐스트는 컴파일러가 변수의 타입이 변경되지 않음을 **보장**할 수 있을 때만 동작합니다.

-   **`val` 변수**: 항상 스마트 캐스트가 가능합니다.
-   **`var` 변수**: 타입 검사 이후, 해당 변수에 다른 값이 재할당될 가능성이 없는 경우에만 스마트 캐스트가 동작합니다. (예: 지역 변수) 클래스의 `var` 프로퍼티는 다른 곳에서 언제든지 변경될 수 있으므로 일반적으로 스마트 캐스트되지 않습니다.

### `when` 표현식과 스마트 캐스트

`when` 표현식에서 `is`를 사용하면, 각 분기 내에서 해당 타입으로 스마트 캐스트가 완벽하게 지원됩니다.

```kotlin
fun describe(obj: Any): String =
    when (obj) {
        is Int -> "An Integer"
        is String -> "A String of length ${obj.length}" // String으로 스마트 캐스트
        is Long -> "A Long"
        else -> "Unknown"
    }
```

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[5-5. 타입 캐스팅.md|⬅️ 이전: 타입 캐스팅]] | [[5-6. 봉인된 클래스.md|➡️ 다음: 봉인된 클래스]]