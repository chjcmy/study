# 확장 프로퍼티 (Extension Properties)
#Kotlin/Extension

> [!INFO] 확장 프로퍼티란?
> **확장 프로퍼티(Extension Property)**는 확장 함수와 유사하게, 기존 클래스의 소스 코드를 수정하지 않고 **새로운 프로퍼티를 추가**하는 기능입니다.

## 1. 확장 프로퍼티의 특징

> [!IMPORTANT] 확장 프로퍼티에는 백킹 필드가 없다
> 확장 프로퍼티는 값을 저장하기 위한 **백킹 필드(Backing Field)를 가질 수 없습니다.** 따라서, 확장 프로퍼티는 특정 값을 저장하는 용도가 아니라, 기존 객체의 다른 프로퍼티를 이용하여 **계산된 값을 제공**하는 용도로만 사용됩니다.
>
> 이 때문에 초기화 구문을 가질 수 없으며, 반드시 `get()`을 구현해야 합니다.

## 2. 읽기 전용 확장 프로퍼티 (`val`)

`val`로 선언하며, `get()` 메소드를 반드시 구현해야 합니다.

```kotlin
// String 클래스에 마지막 문자를 반환하는 lastChar 프로퍼티를 확장
val String.lastChar: Char
    get() = this[this.length - 1]

fun main() {
    val text = "Kotlin"
    // String 클래스의 멤버 프로퍼티처럼 사용
    println(text.lastChar) // 출력: n
}
```

데이터 클래스와 함께 사용하면, 여러 프로퍼티를 조합한 새로운 계산 프로퍼티를 외부에 정의할 수 있어 유용합니다.

```kotlin
data class User(val firstName: String, val lastName: String)

// User 클래스에 fullName 프로퍼티를 확장
val User.fullName: String
    get() = "$firstName $lastName"

fun main() {
    val user = User("Gildong", "Hong")
    println(user.fullName) // 출력: Gildong Hong
}
```

## 3. 변경 가능 확장 프로퍼티 (`var`)

`var`로 선언하며, `get()`과 `set()`을 모두 구현해야 합니다. `set()` 내부에서는 값을 저장하는 대신, 수신 객체의 다른 프로퍼티를 변경하는 등의 동작을 수행합니다.

```kotlin
// StringBuilder 클래스에 마지막 문자를 get/set 할 수 있는 lastChar 프로퍼티를 확장
var StringBuilder.lastChar: Char
    get() = this[this.length - 1]
    set(value) {
        this.setCharAt(this.length - 1, value)
    }

fun main() {
    val sb = StringBuilder("Kotlin?")
    
    // get() 호출
    println(sb.lastChar) // 출력: ?

    // set() 호출
    sb.lastChar = '!'
    println(sb.toString()) // 출력: Kotlin!
}
```

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[13. 제네릭스 소개.md|⬅️ 이전: 제네릭]] | [[16. break와 continue.md|➡️ 다음: break와 continue]]