# 널이 될 수 있는 타입 (Nullable Types)
#Kotlin/NullSafety

> [!INFO] 코틀린의 널 안정성 (Null Safety)
> 자바를 포함한 많은 프로그래밍 언어에서 가장 흔하게 발생하는 런타임 오류 중 하나는 **`NullPointerException`(NPE)**, 일명 '10억 달러짜리 실수'입니다.
>
> 코틀린은 타입 시스템 자체에 **널 안정성(Null Safety)**을 내장하여, 컴파일 시점에 NPE가 발생할 가능성을 근본적으로 제거하는 것을 목표로 합니다.

## 1. 널 가능 타입 vs 널 불가능 타입

코틀린의 모든 타입은 기본적으로 **널이 될 수 없습니다(Non-nullable).**

```kotlin
var name: String = "Kotlin"
// name = null // 컴파일 오류! String 타입에는 null을 할당할 수 없음
```

변수에 `null`을 할당하려면, 타입 이름 뒤에 물음표(`?`)를 붙여 해당 타입이 **널이 될 수 있음(Nullable)**을 명시적으로 선언해야 합니다.

```kotlin
var nullableName: String? = "Kotlin"
nullableName = null // OK
```

## 2. 널 가능 타입 다루기

널 가능한 타입의 변수는 `null`일 가능성이 있으므로, 컴파일러는 해당 변수의 멤버에 직접 접근하는 것을 허용하지 않습니다.

```kotlin
val name: String? = null
// println(name.length) // 컴파일 오류! name은 null일 수 있음
```

이러한 변수를 안전하게 다루기 위해 코틀린은 여러 도구를 제공합니다.

### `if`를 사용한 명시적 체크
가장 기본적인 방법입니다. `if`문으로 `null`이 아님을 확인하면, 컴파일러는 해당 분기 안에서 변수가 `null`이 아님을 인지하고 **스마트 캐스트(Smart Cast)**를 수행하여 non-null 타입처럼 다루게 해줍니다.

```kotlin
if (name != null) {
    println(name.length) // 이 블록 안에서 name은 String 타입으로 취급됨
}
```

### 안전한 호출 연산자 (`?.`)
`if` 체크를 더 간결하게 표현하는 방법입니다. 변수가 `null`이면 `null`을 반환하고, 아니면 멤버에 접근합니다.

```kotlin
println(name?.length) // name이 null이면 null을, 아니면 길이를 출력
```

### 엘비스 연산자 (`?:`)
안전한 호출의 결과가 `null`일 때, 사용할 기본값을 지정합니다.

```kotlin
val length = name?.length ?: 0 // name이 null이면 길이는 0
```

### 널 아님 단언 (`!!`)
> [!WARNING]
> `!!` 연산자는 변수가 절대 `null`이 아니라고 개발자가 강제로 단언하는 기능입니다. 만약 `null`인데 `!!`를 사용하면 **NPE가 발생**하므로, 사용을 최대한 지양하고 안전한 호출이나 다른 대안을 사용해야 합니다.

```kotlin
println(name!!.length) // name이 null이면 여기서 NPE 발생!
```

### 안전한 캐스트 (`as?`)
타입 캐스팅이 실패할 경우 예외를 던지는 대신 `null`을 반환합니다.

```kotlin
val a: Any = "some string"
val b: Int? = a as? Int // 캐스팅 실패 시 null이 됨
println(b) // 출력: null
```

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[8. 구조 분해 선언.md|⬅️ 이전: 구조 분해 선언]] | [[10. 안전한 호출과 엘비스 연산자.md|➡️ 다음: 안전한 호출과 엘비스 연산자]]