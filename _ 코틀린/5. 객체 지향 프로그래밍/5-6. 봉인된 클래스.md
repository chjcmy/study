---
tags: [Kotlin, 객체지향, 봉인된클래스, SealedClass]
aliases: [Kotlin Sealed Class, 봉인된 클래스]
---

# 봉인된 클래스 (Sealed Class)

> [!INFO] 봉인된 클래스란?
> **봉인된 클래스(Sealed Class)**는 자기 자신을 상속받는 자식 클래스의 종류를 **제한**하는 특별한 클래스입니다. `sealed` 키워드를 사용하여 선언합니다.
>
> 봉인된 클래스의 모든 자식 클래스는 컴파일 시점에 이미 알려져 있어야 하며, **같은 패키지 또는 같은 모듈 내**에 정의되어야 합니다.

## 1. 봉인된 클래스의 특징

-   **제한된 계층 구조**: 미리 정의된 특정 타입들만 상속받을 수 있도록 하여, 클래스 계층 구조를 '봉인'합니다.
-   **추상 클래스**: 봉인된 클래스는 그 자체로 추상(abstract) 클래스이며, 직접 인스턴스를 만들 수 없습니다.
-   **다양한 자식 클래스**: 자식 클래스는 일반 클래스, `data class`, `object` 등 다양한 형태로 만들 수 있습니다.

## 2. `when` 표현식과의 결합

> [!IMPORTANT]
> 봉인된 클래스의 가장 큰 장점은 `when` 표현식과 함께 사용될 때 나타납니다.

컴파일러는 봉인된 클래스의 모든 자식 클래스 타입을 알고 있으므로, `when`을 사용하여 분기 처리를 할 때 **모든 자식 타입을 처리했는지 검사**할 수 있습니다.

-   모든 자식 타입을 처리했다면, `else` 분기를 작성할 필요가 없습니다.
-   만약 새로운 자식 클래스를 추가하고 `when`에서 처리하지 않으면, 컴파일러가 오류를 발생시켜 개발자가 실수를 바로잡도록 도와줍니다.

### 예제: API 응답 상태 처리

API 호출의 결과는 '성공', '실패', '로딩 중' 등 몇 가지 정해진 상태로 나뉩니다. 이는 봉인된 클래스로 표현하기에 매우 적합한 사례입니다.

```kotlin
// API 응답 결과를 나타내는 봉인된 클래스
sealed class Result {
    data class Success(val data: String) : Result()
    data class Error(val exception: Exception) : Result()
    object Loading : Result()
}

// 결과를 처리하는 함수
fun handleResult(result: Result) {
    when (result) {
        is Result.Success -> {
            println("Success: ${result.data}")
        }
        is Result.Error -> {
            println("Error: ${result.exception.message}")
        }
        is Result.Loading -> {
            println("Loading...")
        }
        // 모든 자식 클래스(Success, Error, Loading)를 처리했으므로
        // else 분기가 필요 없음!
    }
}
```
> 만약 나중에 `Result`에 `Timeout`이라는 새로운 자식 클래스를 추가하면, `handleResult` 함수의 `when`문에서 컴파일 오류가 발생하여 `Timeout` 상태에 대한 처리를 누락하지 않도록 강제할 수 있습니다.

## 3. 이넘(Enum) vs 봉인된 클래스

| 구분 | 이넘 클래스 (Enum Class) | 봉인된 클래스 (Sealed Class) |
| :--- | :--- | :--- |
| **인스턴스** | 각 상수는 **단 하나의 인스턴스**만 가짐 | 각 자식 클래스는 **여러 인스턴스**를 가질 수 있음 |
| **상태 저장** | 모든 상수가 동일한 프로퍼티를 가짐 | 자식 클래스마다 **서로 다른 프로퍼티**를 가질 수 있음 |
| **주 사용처** | 상태, 방향 등 값 자체가 중요한 상수 집합 | 상태와 함께 **관련 데이터를 함께** 다루어야 하는 경우 |

-   **이넘**: `Direction.NORTH`, `Direction.SOUTH` (상태만 존재)
-   **봉인된 클래스**: `Result.Success("데이터")`, `Result.Error(Exception("에러"))` (상태와 함께 관련 데이터도 존재)

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[5-5. 타입 캐스팅.md|⬅️ 이전: 타입 캐스팅]] | [[5-7. 내포된 클래스와 내부 클래스.md|➡️ 다음: 내포된 클래스와 내부 클래스]]