---
tags: [Kotlin, 객체지향, 디자인패턴, 위임]
aliases: [Kotlin Class Delegation, 클래스 위임, Delegation Pattern]
---

# 클래스 위임 (Class Delegation)

> [!INFO] 클래스 위임이란?
> **클래스 위임(Class Delegation)**은 객체 지향 디자인 패턴 중 하나로, 한 객체가 자신의 책임을 다른 객체(대리자, delegate)에게 '위임'하여 처리를 맡기는 것입니다.
>
> 코틀린은 **`by`** 키워드를 통해 이러한 위임 패턴을 언어 차원에서 간결하게 지원합니다.

## 1. 상속의 문제점과 위임의 등장

전통적인 **상속(Inheritance)**은 코드 재사용을 위한 강력한 도구이지만, 다음과 같은 문제점을 가집니다.

-   **강한 결합(Tight Coupling)**: 자식 클래스가 부모 클래스의 내부 구현에 강하게 의존하게 되어, 부모 클래스의 변경이 자식에게 예기치 않은 영향을 줄 수 있습니다. (취약한 기반 클래스 문제)
-   **단일 상속 제한**: 코틀린(과 자바)에서는 하나의 클래스만 상속할 수 있어 기능 확장에 한계가 있습니다.

이러한 문제를 해결하기 위해 **"상속보다는 컴포지션을 사용하라(Composition over inheritance)"**는 객체 지향 원칙이 등장했으며, 클래스 위임은 이 원칙을 효과적으로 구현하는 방법 중 하나입니다.

## 2. 코틀린의 클래스 위임: `by` 키워드

코틀린에서는 `by` 키워드를 사용하여 인터페이스의 구현을 다른 객체에게 통째로 위임할 수 있습니다.

-   **동작**: 클래스가 특정 인터페이스를 구현하도록 선언한 뒤, `by` 키워드 뒤에 해당 인터페이스의 구현을 담고 있는 객체를 지정합니다.
-   **효과**: 컴파일러가 인터페이스의 모든 메소드에 대한 보일러플레이트 코드를 자동으로 생성해 주며, 모든 호출을 위임 객체에게 전달합니다.

### 예제

```kotlin
// 1. 공통 기능을 정의하는 인터페이스
interface CanFly {
    fun fly()
}

// 2. 인터페이스를 구현하는 위임 객체
class Winged : CanFly {
    override fun fly() {
        println("Flying with wings!")
    }
}

// 3. CanFly 인터페이스의 구현을 'Winged' 객체에게 위임
class Bird(val name: String) : CanFly by Winged()

// 4. 일부 기능은 직접 재정의(override)할 수도 있음
class Bat : CanFly by Winged() {
    override fun fly() {
        println("Flying at night!")
    }
}

fun main() {
    val bird = Bird("Eagle")
    bird.fly() // 출력: Flying with wings! (Winged 객체의 fly()가 호출됨)

    val bat = Bat()
    bat.fly() // 출력: Flying at night! (직접 재정의한 fly()가 호출됨)
}
```

## 3. 상속 vs 클래스 위임

| 구분 | 상속 (Inheritance) | 클래스 위임 (Delegation) |
| :--- | :--- | :--- |
| **관계** | **is-a** (강아지는 동물이다) | **has-a** (새는 날개를 가지고 있다) |
| **결합도** | 강함 (부모-자식) | 약함 (인터페이스에만 의존) |
| **유연성** | 컴파일 타임에 관계 고정 | 런타임에 위임 객체를 교체하여 행동 변경 가능 |
| **다중 상속** | 클래스는 단일 상속만 가능 | 여러 인터페이스를 각각 다른 객체에 위임 가능 |

> [!TIP]
> 클래스 위임은 상속의 단점을 피하면서 코드 재사용성을 높일 수 있는 매우 유연하고 강력한 대안입니다. 특히, 명확한 "is-a" 관계가 아닐 경우, 상속 대신 위임을 사용하는 것을 우선적으로 고려하는 것이 좋습니다.

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[5-8. 동반 객체.md|⬅️ 이전: 동반 객체]] | [[5-10. 복잡한 생성자.md|➡️ 다음: 복잡한 생성자]]