# 프로퍼티 접근자 (Accessors)
#Kotlin/Property

> [!INFO] 프로퍼티 접근자(Accessor)란?
> 코틀린에서 프로퍼티의 값을 읽거나 쓸 때 내부적으로 호출되는 특별한 함수입니다.
> - **Getter**: 값을 읽을 때 호출 (`val`, `var` 모두 가짐)
> - **Setter**: 값을 쓸 때 호출 (`var`만 가짐)
>
> 코틀린은 자바와 달리, 프로퍼티를 선언하면 컴파일러가 이 접근자들을 **자동으로 생성**해 줍니다.

## 1. 기본 접근자

별도로 접근자를 선언하지 않으면, 코틀린 컴파일러가 다음과 같은 기본 구현을 제공합니다.

```kotlin
class Person {
    var name: String = "Unknown"
    // 위 코드는 내부적으로 아래와 같음
    // get() = field
    // set(value) { field = value }
}

fun main() {
    val person = Person()
    println(person.name)  // Getter 호출
    person.name = "Alice" // Setter 호출
}
```

### 백킹 필드 (`field`)

-   **`field`**는 프로퍼티의 데이터를 실제로 저장하는 숨겨진 필드를 의미합니다.
-   접근자 내부에서만 `field`라는 이름으로 접근할 수 있습니다.
-   `get()`에서는 `field` 값을 읽고, `set(value)`에서는 `field`에 `value`를 씁니다.

## 2. 커스텀 접근자 (Custom Accessors)

Getter와 Setter의 동작을 직접 정의하여, 값을 읽거나 쓸 때 추가적인 로직을 수행할 수 있습니다.

### 커스텀 Getter

값을 읽을 때마다 특정 연산을 수행하거나, 다른 프로퍼티를 조합하여 새로운 값을 계산해서 반환할 수 있습니다.

```kotlin
class Rectangle(val width: Int, val height: Int) {
    // isSquare는 저장되는 값이 아니라, 호출될 때마다 계산되는 프로퍼티
    val isSquare: Boolean
        get() {
            println("Checking if it's a square...")
            return width == height
        }
}

fun main() {
    val rect = Rectangle(10, 10)
    println(rect.isSquare) // Getter 호출 -> "Checking..." 출력 후 true 반환
}
```

### 커스텀 Setter

값을 설정하기 전에 유효성을 검사하거나, 데이터를 특정 형태로 가공하여 저장할 수 있습니다.

```kotlin
class User {
    var name: String = ""
        set(value) {
            println("Name is being set to $value")
            // field에 값을 저장하기 전에 검증 또는 가공 로직 추가
            if (value.isNotBlank()) {
                field = value.trim()
            }
        }
}

fun main() {
    val user = User()
    user.name = "  Alice  " // Setter 호출
    println(user.name) // Getter 호출 -> 출력: Alice
}
```

## 3. 접근자 가시성 변경

프로퍼티의 기본 가시성(public)과 별개로, Getter나 Setter의 가시성을 더 제한적으로 변경할 수 있습니다.

> [!TIP]
> 이 기능은 주로 **"외부에서는 읽기만 가능하게 하고, 내부에서만 값을 변경하고 싶을 때"** 매우 유용하게 사용됩니다.

```kotlin
class Counter {
    var value: Int = 0
        private set // Setter를 private으로 만들어 외부에서의 수정을 막음

    fun increment() {
        value++ // 내부에서는 Setter 호출이 가능
    }
}

fun main() {
    val counter = Counter()
    counter.increment()
    println(counter.value) // Getter는 public이므로 읽기 가능 -> 출력: 1

    // counter.value = 5 // 컴파일 오류! Setter is private
}
```

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[14. 맵.md|⬅️ 이전: 맵]] | [[2. 클래스 만들기.md|➡️ 다음: 클래스 만들기]]