# 코틀린의 예외 처리
#Kotlin/Exception

> [!INFO] 예외(Exception)란?
> **예외**는 프로그램이 실행되는 도중에 발생하는, 예상치 못한 비정상적인 상황을 의미합니다. (예: 0으로 나누기, 존재하지 않는 파일 접근 등)
>
> **예외 처리(Exception Handling)**는 이러한 예외가 발생했을 때 프로그램이 비정상적으로 종료되지 않고, 문제를 적절히 처리하여 계속 실행되도록 만드는 중요한 메커니즘입니다.

## 1. `try-catch-finally` 블록

코틀린의 예외 처리는 `try-catch-finally` 블록을 기반으로 합니다.

-   **`try`**: 예외가 발생할 가능성이 있는 코드를 감싸는 블록.
-   **`catch`**: `try` 블록에서 특정 타입의 예외가 발생했을 때, 이를 '잡아서' 처리하는 블록.
-   **`finally`**: 예외 발생 여부와 관계없이 **항상** 실행되는 블록. 주로 사용한 리소스를 해제하는 코드가 위치합니다.

```kotlin
fun main() {
    try {
        val result = 10 / 0 // ArithmeticException 발생
        println(result)
    } catch (e: ArithmeticException) {
        // 발생한 예외를 잡아서 처리
        println("0으로 나눌 수 없습니다: ${e.message}")
    } catch (e: Exception) {
        // 다른 모든 종류의 예외를 처리
        println("알 수 없는 예외 발생: ${e.message}")
    } finally {
        // 예외 발생 여부와 상관없이 항상 실행
        println("예외 처리 블록 종료")
    }
}
```

## 2. `throw`: 예외 발생시키기

`throw` 키워드를 사용하여 코드에서 의도적으로 예외를 발생시킬 수 있습니다. 주로 함수의 인자 값이 잘못되었거나, 특정 비즈니스 규칙을 위반했을 때 사용합니다.

```kotlin
fun validateAge(age: Int) {
    if (age < 0) {
        // 잘못된 인자 값에 대해 예외를 던짐
        throw IllegalArgumentException("나이는 음수일 수 없습니다. 입력된 값: $age")
    }
}

fun main() {
    try {
        validateAge(-5)
    } catch (e: IllegalArgumentException) {
        println("오류: ${e.message}")
    }
}
```

## 3. `try`는 표현식이다

코틀린에서 `try-catch` 블록은 `if`나 `when`처럼 값을 반환하는 **표현식**으로 사용될 수 있습니다.

-   `try` 블록의 마지막 표현식이 전체 식의 결과가 됩니다.
-   예외가 발생하면, `catch` 블록의 마지막 표현식이 결과가 됩니다.

```kotlin
val numberString = "123a"
val number = try {
    Integer.parseInt(numberString)
} catch (e: NumberFormatException) {
    println("숫자 변환에 실패했습니다.")
    null // 예외 발생 시 null을 반환
}

println(number) // 출력: null
```

## 4. 체크 예외(Checked Exception)의 부재

> [!IMPORTANT] 자바와의 차이점
> 자바와 달리, 코틀린은 **체크 예외(Checked Exception)를 강제하지 않습니다.**
>
> -   **자바**: `IOException`과 같은 체크 예외는 반드시 `try-catch`로 감싸거나, `throws`로 호출한 쪽으로 처리를 위임해야만 컴파일이 됩니다.
> -   **코틀린**: 모든 예외를 '언체크 예외(Unchecked Exception)'로 간주합니다. 따라서 개발자가 필요에 따라 선택적으로 예외를 처리할 수 있으며, 불필요한 `try-catch` 구문을 줄여 코드가 더 간결해집니다.

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[8. 테스트.md|⬅️ 이전: 테스트]] | [[10. 리스트.md|➡️ 다음: 리스트]]