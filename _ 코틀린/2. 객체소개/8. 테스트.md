# 코틀린의 테스트
#Kotlin/Test

> [!INFO] 테스트(Test)란?
> **테스트**는 내가 작성한 코드가 의도한 대로 정확하게 동작하는지 검증하는 과정입니다. 테스트는 코드의 품질을 보장하고, 향후 발생할 수 있는 버그를 미리 찾아내며, 리팩토링 시 코드의 안정성을 확보하는 데 필수적인 역할을 합니다.

## 1. 왜 테스트를 해야 하는가?

-   **버그 조기 발견**: 코드를 수정한 후, 기존 기능이 망가지는 회귀(Regression) 버그를 빠르게 찾아낼 수 있습니다.
-   **안정적인 리팩토링**: 테스트 코드가 안전망 역할을 해주므로, 자신감을 갖고 코드 구조를 개선할 수 있습니다.
-   **살아있는 문서**: 잘 작성된 테스트 코드는 해당 코드의 기능과 사용법을 보여주는 가장 정확한 문서가 됩니다.

## 2. 테스트의 종류

-   **단위 테스트 (Unit Test)**: 함수나 클래스 등 가장 작은 코드 단위를 독립적으로 검증하는 테스트입니다.
-   **통합 테스트 (Integration Test)**: 여러 개의 단위 또는 모듈이 함께 연동될 때 발생하는 문제를 검증하는 테스트입니다.
-   **E2E 테스트 (End-to-End Test)**: 실제 사용자의 시나리오와 동일한 환경에서 전체 시스템의 흐름을 검증하는 테스트입니다.

## 3. 코틀린의 테스트 프레임워크

코틀린에서는 다양한 테스트 프레임워크를 사용하여 테스트를 자동화할 수 있습니다.

-   **JUnit**: 자바 진영에서 가장 널리 사용되는 표준 테스트 프레임워크로, 코틀린에서도 완벽하게 호환됩니다.
-   **Kotest**: 코틀린의 언어적 특성(확장 함수, DSL 등)을 적극적으로 활용하여, 더 간결하고 가독성 높은 테스트 코드를 작성할 수 있도록 도와주는 코틀린 전용 프레임워크입니다.
-   **mockk**: 코틀린을 위한 강력한 모의(Mocking) 라이브러리로, 테스트 대상이 의존하는 객체를 가짜 객체로 대체하여 테스트를 용이하게 만듭니다.

## 4. 테스트 코드 작성 예시 (JUnit 5)

가장 일반적으로 사용되는 JUnit 5를 사용한 테스트 코드 예시입니다.

```kotlin
// 테스트할 대상 클래스
class Calculator {
    fun sum(a: Int, b: Int) = a + b
}
```

```kotlin
// 테스트 코드
import org.junit.jupiter.api.Test
import kotlin.test.assertEquals

class CalculatorTest {

    @Test // 이 함수가 테스트 메소드임을 알림
    fun `1과 2를 더하면 3이 반환된다`() {
        // 1. 준비 (Given)
        val calculator = Calculator()

        // 2. 실행 (When)
        val result = calculator.sum(1, 2)

        // 3. 검증 (Then)
        assertEquals(3, result, "1 + 2는 3이어야 합니다.")
    }
}
```

> [!TIP] Given-When-Then 패턴
> 테스트 코드를 작성할 때는 **준비(Given) - 실행(When) - 검증(Then)** 의 세 단계로 구조화하면, 테스트의 의도를 명확하게 드러낼 수 있어 가독성과 유지보수성이 향상됩니다.

---
> [[00. 코틀린 목차.md|⬆️ 목차로 돌아가기]]
> [[7. 패키지.md|⬅️ 이전: 패키지]] | [[9. 예외.md|➡️ 다음: 예외]]