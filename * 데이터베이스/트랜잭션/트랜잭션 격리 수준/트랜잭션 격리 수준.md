# 트랜잭션 격리 수준 (Isolation Levels)
#Database/Transaction #Database/Concurrency

> [!INFO] 트랜잭션 격리 수준이란?
> 여러 트랜잭션이 동시에 실행될 때, 특정 트랜잭션이 다른 트랜잭션의 변경 내용을 어느 정도까지 볼 수 있도록 허용할 것인지를 결정하는 규칙입니다. 즉, 트랜잭션의 **고립성(Isolation)**을 보장하는 정도를 나타냅니다. 격리 수준이 높아질수록 데이터의 일관성은 강해지지만, 동시 처리 성능은 저하될 수 있습니다.

## 격리 수준에 따라 발생하는 현상들

-   **Dirty Read**: 다른 트랜잭션이 아직 **커밋(Commit)하지 않은** 변경 중인 데이터를 읽는 현상. 만약 해당 트랜잭션이 롤백(Rollback)되면, 잘못된 데이터를 읽은 셈이 됩니다.
-   **Non-Repeatable Read (반복 불가능 읽기)**: 한 트랜잭션 내에서 동일한 쿼리를 두 번 실행했을 때, 그 사이에 다른 트랜잭션이 값을 수정하고 커밋하여 **두 쿼리의 결과가 다르게** 나타나는 현상.
-   **Phantom Read (유령 읽기)**: 한 트랜잭션 내에서 동일한 쿼리를 두 번 실행했을 때, 첫 번째 쿼리에서는 없었던 **새로운 행이 두 번째 쿼리에서 나타나는** 현상. 다른 트랜잭션이 새로운 행을 추가하고 커밋했기 때문에 발생합니다.

## 격리 수준의 종류

### 1. Read Uncommitted (레벨 0)

-   **설명**: 다른 트랜잭션이 커밋하지 않은 데이터를 읽는 것을 허용합니다.
-   **발생 현상**: Dirty Read, Non-Repeatable Read, Phantom Read 모두 발생 가능.
-   **특징**: 가장 낮은 격리 수준으로, 정합성 문제가 발생할 수 있어 실제 운영 환경에서는 거의 사용하지 않습니다.

### 2. Read Committed (레벨 1)

-   **설명**: **커밋된 데이터만** 읽는 것을 허용합니다.
-   **발생 현상**: Non-Repeatable Read, Phantom Read 발생 가능.
-   **특징**: Dirty Read를 방지합니다. 대부분의 상용 데이터베이스(Oracle, PostgreSQL, SQL Server 등)에서 **기본값**으로 사용되는 가장 일반적인 격리 수준입니다.

### 3. Repeatable Read (레벨 2)

-   **설명**: 트랜잭션이 시작된 시점을 기준으로 스냅샷을 만들어, 트랜잭션 내내 동일한 데이터만 보이도록 보장합니다.
-   **발생 현상**: Phantom Read 발생 가능. (단, InnoDB 엔진 등에서는 Phantom Read도 대부분 방지됨)
-   **특징**: 한 트랜잭션 내에서 반복적으로 데이터를 읽어도 항상 동일한 결과를 보장합니다. MySQL의 InnoDB 엔진에서 기본값으로 사용됩니다.

### 4. Serializable (레벨 3)

-   **설명**: 가장 엄격한 격리 수준으로, 트랜잭션을 순서대로 하나씩 실행하는 것처럼 동작하도록 보장합니다.
-   **발생 현상**: 모든 이상 현상을 방지합니다.
-   **특징**: 완벽한 데이터 일관성을 제공하지만, 동시 처리 성능이 가장 낮아 교착 상태(Deadlock)가 발생할 가능성이 높습니다.

## 격리 수준 비교 요약

| 격리 수준 | Dirty Read | Non-Repeatable Read | Phantom Read |
| :--- | :---: | :---: | :---: |
| **Read Uncommitted** | 발생 | 발생 | 발생 |
| **Read Committed** | **방지** | 발생 | 발생 |
| **Repeatable Read** | **방지** | **방지** | 발생 |
| **Serializable** | **방지** | **방지** | **방지** |

---
> [[00. 데이터베이스 목차.md|⬆️ 목차로 돌아가기]]
> [[../트랜잭션.md|⬅️ 이전: 트랜잭션]]