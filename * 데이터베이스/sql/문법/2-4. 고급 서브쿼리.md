# SQL 고급 서브쿼리
#Database/SQL #SQL/Advanced

## 4. 고급 서브쿼리 (Advanced Subquery)

-   **상관 서브쿼리 (Correlated Subquery)**: 외부 쿼리의 컬럼을 참조하는 서브쿼리. 외부 쿼리의 각 행에 대해 서브쿼리가 반복 실행됩니다.
    ```sql
    -- 자신이 속한 부서의 평균 급여보다 많이 받는 직원 찾기
    SELECT name, salary FROM employees e1
    WHERE salary > (SELECT AVG(salary) FROM employees e2 WHERE e2.department = e1.department);
    ```
-   **`EXISTS`**: 서브쿼리의 결과가 하나라도 존재하면 `TRUE`를 반환합니다.
    ```sql
    -- 한 번이라도 주문한 적이 있는 고객 찾기
    SELECT name FROM customers c
    WHERE EXISTS (SELECT 1 FROM orders o WHERE o.customer_id = c.id);
    ```

---
> [[00. 데이터베이스 목차.md|⬆️ 목차로 돌아가기]]
> [[2-3. 고급 조인.md|⬅️ 이전: 고급 조인]] | [[2-5. 고급 그룹화.md|➡️ 다음: 고급 그룹화]]